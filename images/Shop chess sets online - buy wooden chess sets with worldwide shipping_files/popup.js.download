"use strict";jQuery(document).ready(function($){var adpPopup={};(function(){var $this;adpPopup={sPrevious:window.scrollY,sDirection:"down",init:function(e){$this=adpPopup,$this.popupInit(e),$this.events(e)},events:function(e){$(document).on("click",".popup-close",$this.closePopup),$(document).on("click",".popup-accept",$this.acceptPopup),$(document).on("click",".popup-accept",$this.closePopup),$(document).on("click",".age-verification__popup-close",$this.agePopup),$(document).on("click",".age-verification__popup-close",$this.closePopup),$(document).on("click",".age-verification__button-no",$this.ageDeclined),$(document).keyup(function(e2){e2.key==="Escape"&&$('.popup-open[data-esc-close="true"]').each(function(index,popup){$this.closePopup(popup)}),e2.key==="F4"&&$('.popup-open[data-f4-close="true"]').each(function(index,popup){$this.closePopup(popup)})}),$(document).on("click",".popup-overlay",function(e2){$('.popup-open[data-overlay-close="true"]').each(function(index,popup){$this.closePopup(popup)})})},popupInit:function(e){$(document).on("scroll",function(){let scrollCurrent=window.scrollY;scrollCurrent>$this.sPrevious?$this.sDirection="down":$this.sDirection="up",$this.sPrevious=scrollCurrent}),$(".popup").each(function(index,popup){if($(popup).data("open-trigger")==="manual"){let selector=$(popup).data("open-manual-selector");selector&&($(selector).addClass("popup-trigger"),$(document).on("click",selector,function(e2){e2.preventDefault(),$(popup).removeClass("popup-already-opened"),(e2.currentTarget.classList.contains("popup")||$(e2.currentTarget).parents(".popup").length>0)&&$this.closePopup(selector),$this.openPopup(popup)}))}!$this.isAllowPopup(popup)&&!$(popup).hasClass("age-verification")||$this.openTriggerPopup(popup)})},openTriggerPopup:function(e){let popup=e.originalEvent?this:e;var trigger=$(popup).data("open-trigger");if(trigger==="none"&&($this.getCookie("popup-age-"+$(popup).data("id")||0)||$this.openPopup(popup)),trigger==="delay"&&setTimeout(function(){$this.openPopup(popup)},$(popup).data("open-delay-number")*1e3),trigger==="exit"){var showExit=!0;document.addEventListener("mousemove",function(e2){var scroll=window.pageYOffset||document.documentElement.scrollTop;e2.pageY-scroll<7&&showExit&&($this.openPopup(popup),showExit=!1)})}if(trigger==="scroll"){var pointScrollType=$(popup).data("open-scroll-type"),pointScrollPosition=$(popup).data("open-scroll-position");$(document).on("scroll",function(){pointScrollType==="px"&&window.scrollY>=pointScrollPosition&&$this.openPopup(popup),pointScrollType==="%"&&$this.getScrollPercent()>=pointScrollPosition&&$this.openPopup(popup)})}trigger==="accept"&&($this.getCookie("popup-accept-"+$(popup).data("id")||0)||$this.openPopup(popup))},closeTriggerPopup:function(e){let popup=e.originalEvent?this:e;var trigger=$(popup).data("close-trigger");if(trigger==="delay"&&setTimeout(function(){$this.closePopup(popup)},$(popup).data("close-delay-number")*1e3),trigger==="scroll"){var pointScrollType=$(popup).data("close-scroll-type"),pointScrollPosition=$(popup).data("close-scroll-position"),initScrollPx=$(popup).data("init-scroll-px"),initScrollPercent=$(popup).data("init-scroll-percent");$(document).on("scroll",function(){pointScrollType==="px"&&($this.sDirection==="up"&&window.scrollY<initScrollPx-pointScrollPosition&&$this.closePopup(popup),$this.sDirection==="down"&&window.scrollY>=initScrollPx+pointScrollPosition&&$this.closePopup(popup)),pointScrollType==="%"&&($this.sDirection==="up"&&$this.getScrollPercent()<initScrollPercent-pointScrollPosition&&$this.closePopup(popup),$this.sDirection==="down"&&$this.getScrollPercent()>=initScrollPercent+pointScrollPosition&&$this.closePopup(popup))})}},openPopup:function(e){let popup=e.originalEvent?this:e;$(popup).is('[data-body-scroll-disable="true"]')&&$("body").addClass("popup-scroll-hidden");let limit=parseInt($this.getCookie("popup-"+$(popup).data("id"))||0)+1;if($this.setCookie("popup-"+$(popup).data("id"),limit,{expires:$(popup).data("limit-lifetime")}),$(popup).hasClass("popup-open")||$(popup).hasClass("popup-already-opened"))return;$(popup).addClass("popup-open"),$(popup).data("init-scroll-px",window.scrollY),$(popup).data("init-scroll-percent",$this.getScrollPercent());let animation=$(popup).data("open-animation");$this.applyAnimation(popup,animation),$this.closeTriggerPopup(popup)},agePopup:function(e){let $el=e.originalEvent?this:e,popup=$($el).closest(".popup");$this.setCookie("popup-age-"+$(popup).data("id"),1,{expires:360})},ageDeclined:function(){$(".age-verification__question").removeClass("show"),$(".age-verification__declined").addClass("show")},acceptPopup:function(e){let $el=e.originalEvent?this:e,popup=$($el).closest(".popup");$this.setCookie("popup-accept-"+$(popup).data("id"),1,{expires:360})},closePopup:function(e){let $el=e.originalEvent?this:e,popup=$($el).closest(".popup"),animation=$(popup).data("exit-animation");$this.applyAnimation(popup,animation,function(){$(popup).addClass("popup-already-opened"),$(popup).removeClass("popup-open")}),$("body").removeClass("popup-scroll-hidden")},isAllowPopup:function(e){let popup=e.originalEvent?this:e,limitDisplay=parseInt($(popup).data("limit-display")||0),limitDisplayCookie=parseInt($this.getCookie("popup-"+$(popup).data("id")));if(!(limitDisplay&&limitDisplayCookie&&limitDisplayCookie>=limitDisplay))return!0},applyAnimation:function(el,name,callback){var popup=$(el).closest(".popup");if(typeof callback=="function")var overlayName="popupExitFade";else var overlayName="popupOpenFade";$(popup).next(".popup-overlay").addClass("popup-animated "+overlayName).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("popup-animated "+overlayName)}),$(popup).find(".popup-wrap").addClass("popup-animated "+name).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("popup-animated "+name),typeof callback=="function"&&callback()})},getCookie:function(name){var matches=document.cookie.match(new RegExp("(?:^|; )"+name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return matches?decodeURIComponent(matches[1]):void 0},setCookie:function(name,value,options){options=options||{},options.path=options.hasOwnProperty("path")?options.path:"/",options.expires=parseInt(options.expires),typeof options.expires=="number"&&options.expires&&(options.expires=new Date().setDate(new Date().getDate()+options.expires),options.expires=new Date(options.expires).toUTCString()),value=encodeURIComponent(value);var updatedCookie=name+"="+value;for(var propName in options){updatedCookie+="; "+propName;var propValue=options[propName];propValue!==!0&&(updatedCookie+="="+propValue)}document.cookie=updatedCookie},getScrollPercent:function(){var h=document.documentElement,b=document.body,st="scrollTop",sh="scrollHeight";return(h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight)*100}}})(),adpPopup.init(),document.addEventListener("shopify:section:load",function(){adpPopup.init()})});
//# sourceMappingURL=/cdn/shop/t/35/assets/popup.js.map?v=38780039331749658951728153989
